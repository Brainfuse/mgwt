<module>
    <inherits name='com.google.gwt.user.User'/>
    
    <define-property name="mobile.user.agent" values="mobilesafari, not_mobile" />
<property-provider name="mobile.user.agent"><![CDATA[
  {
    var ua = window.navigator.userAgent.toLowerCase();
    if (ua.indexOf('android') != -1) { return 'mobilesafari'; }
    if (ua.indexOf('iphone') != -1) { return 'mobilesafari'; }
     if (ua.indexOf('ipad') != -1) { return 'mobilesafari'; }
    return 'not_mobile';
  }
]]></property-provider>

<!-- Constrain the value for non-webkit browsers -->
<set-property name="mobile.user.agent" value="not_mobile" >
  <none> <!-- Actually means NOR, in this case "not safari" -->
    <when-property-is name="user.agent" value="safari" />
  </none>
</set-property>


 <replace-with class="com.google.gwt.user.client.impl.DOMImplMobileSafari">
        <when-type-is class="com.google.gwt.user.client.impl.DOMImpl"/>
        <all>
            <when-property-is name="user.agent" value="safari"/>
            <when-property-is name="mobile.user.agent" value="mobilesafari"/>
        </all>
    </replace-with>
    
     <replace-with class="com.google.gwt.user.client.impl.DOMImplSafariWithTransistion">
        <when-type-is class="com.google.gwt.user.client.impl.DOMImpl"/>
        <all>
            <when-property-is name="user.agent" value="safari"/>
            <when-property-is name="mobile.user.agent" value="not_mobile"/>
        </all>
    </replace-with>
    
    
<source path="client"/>
    
</module>